{"version":3,"file":"Login-D-HGpBwB.js","sources":["../../src/pages/Login.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../context/AuthContext.jsx\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const { user, setUser, Loading } = useAuth();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n    const data = Object.fromEntries(formData);\r\n\r\n    if (!data.email || !data.password) {\r\n      alert(\"All fields are required\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `${import.meta.env.VITE_API_URL}/auth/login`,\r\n        data,\r\n        {\r\n          withCredentials: true, // Ensure cookies are sent with the request\r\n        }\r\n      );\r\n      if (response) {\r\n        setUser(response.data.user);\r\n        navigate(`/${response.data.user.firstName.toLowerCase()}`); // Redirect to user's home page\r\n        toast.success(\"Login successful!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to login:\", error);\r\n      toast.error(\"Login failed. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <h2 className=\"text-3xl font-extrabold\">Login</h2>\r\n\r\n      <form onSubmit={(e) => handleSubmit(e)}>\r\n        <input\r\n          className=\"border outline-none p-1 px-4 h-10 rounded-md mt-5 w-full focus:ring-offset-0 focus:ring-2 focus:ring-green-400 transition-all\"\r\n          type=\"email\"\r\n          placeholder=\"example@gmail.com\"\r\n          name=\"email\"\r\n          required\r\n        />\r\n        <input\r\n          className=\"border outline-none p-1 px-4 h-10 rounded-md mt-5 w-full focus:ring-offset-0 focus:ring-2 focus:ring-green-400 transition-all\"\r\n          type=\"password\"\r\n          placeholder=\"**************\"\r\n          name=\"password\"\r\n          required\r\n        />\r\n        <button className=\"bg-btn dark:text-black w-full py-2 rounded-lg mt-5 hover:bg-btn/80 cursor-pointer transition-all duration-300\">\r\n          Login\r\n        </button>\r\n      </form>\r\n\r\n      <p className=\"mt-5\">\r\n        Don't have have an account?{\" \"}\r\n        <Link className=\"underline text-btn\" to=\"/signup\">\r\n          Sign up\r\n        </Link>\r\n      </p>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["Login","navigate","useNavigate","user","setUser","Loading","useAuth","handleSubmit","e","formData","data","response","axios","toast","error","jsxs","jsx","Link"],"mappings":"2EAOA,MAAMA,EAAQ,IAAM,CAClB,MAAMC,EAAWC,EAAA,EACX,CAAE,KAAAC,EAAM,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAA,EAE7BC,EAAe,MAAOC,GAAM,CAChCA,EAAE,eAAA,EACF,MAAMC,EAAW,IAAI,SAASD,EAAE,MAAM,EAChCE,EAAO,OAAO,YAAYD,CAAQ,EAExC,GAAI,CAACC,EAAK,OAAS,CAACA,EAAK,SAAU,CACjC,MAAM,yBAAyB,EAC/B,MAAA,CAGF,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,KAC3B,uCACAF,EACA,CACE,gBAAiB,EAAA,CACnB,EAEEC,IACFP,EAAQO,EAAS,KAAK,IAAI,EAC1BV,EAAS,IAAIU,EAAS,KAAK,KAAK,UAAU,YAAA,CAAa,EAAE,EACzDE,EAAM,QAAQ,mBAAmB,EACnC,OACOC,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,EACvCD,EAAM,MAAM,iCAAiC,CAAA,CAC/C,EAGF,OACEE,EAAAA,KAAC,UAAA,CAAQ,UAAU,QACjB,SAAA,OAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,QAAK,SAE5C,OAAA,CAAK,SAAWP,GAAMD,EAAaC,CAAC,EACnC,SAAA,CAAAQ,EAAAA,IAAC,QAAA,CACC,UAAU,gIACV,KAAK,QACL,YAAY,oBACZ,KAAK,QACL,SAAQ,EAAA,CAAA,EAEVA,EAAAA,IAAC,QAAA,CACC,UAAU,gIACV,KAAK,WACL,YAAY,iBACZ,KAAK,WACL,SAAQ,EAAA,CAAA,QAET,SAAA,CAAO,UAAU,gHAAgH,SAAA,QAElI,CAAA,EACF,EAEAD,EAAAA,KAAC,IAAA,CAAE,UAAU,OAAO,SAAA,CAAA,8BACU,UAC3BE,EAAA,CAAK,UAAU,qBAAqB,GAAG,UAAU,SAAA,SAAA,CAElD,CAAA,EACF,CAAA,EACF,CAEJ"}